{"version":3,"file":"ResponsiveTable.cjs.js","sources":["../src/provideContext.js","../src/withContext.js","../src/helpers.js","../src/ResponsiveTable.js"],"sourcesContent":["import React from 'react'\n\nconst provideContext = (contextKey, contextType) => {\n  class ProvideContext extends React.Component {\n    getChildContext() {\n      const { children, ...props } = this.props\n      return {\n        [contextKey]: props,\n      }\n    }\n\n    render() {\n      return React.Children.only(this.props.children)\n    }\n  }\n\n  ProvideContext.childContextTypes = {\n    [contextKey]: contextType,\n  }\n\n  return ProvideContext\n}\n\nexport default provideContext\n","import React from 'react'\n\nexport default (contextKey, contextType) => Component => {\n  class WithContext extends React.Component {\n    render() {\n      const props = {\n        ...this.props,\n        [contextKey]: this.context[contextKey],\n      }\n      return <Component {...props} />\n    }\n  }\n\n  const displayName = Component.displayName || Component.name || 'Component'\n  WithContext.displayName = `WithContext(${displayName})`\n\n  WithContext.contextTypes = {\n    [contextKey]: contextType,\n  }\n\n  return WithContext\n}\n","export const omit = (obj, omitProps) =>\n    Object.keys(obj)\n        .filter(key => omitProps.indexOf(key) === -1)\n        .reduce((returnObj, key) => ({ ...returnObj, [key]: obj[key] }), {});\n\nexport const allowed = props =>\n    omit(props, ['inHeader', 'columnKey', '_responsiveTable', 'breakPoint']);\n\nexport const randomString = () =>\n    'a' +\n    Math.random()\n        .toString(36)\n        .substring(7);\n\nexport const getCssString = (className, breakPoint) => `\n@media screen and (max-width: ${breakPoint}px) {\n    table.r-responsive-table.${className} {\n        border: 0;\n    }\n\n    table.r-responsive-table.${className} thead {\n        border: none;\n        /* clip: rect(0 0 0 0); */\n        height: 1px;\n        margin: -1px;\n        overflow: hidden;\n        padding: 0;\n        position: absolute;\n        width: 1px;\n    }\n    table.r-responsive-table.${className} tr {\n        border-bottom: 3px solid #ddd;\n        display: block;\n        margin-bottom: 0.625em;\n    }\n    table.r-responsive-table.${className} td {\n        border-bottom: 1px solid #ddd;\n        display: block;\n        font-size: 0.8em;\n        text-align: right;\n    }\n    table.r-responsive-table.${className} .tdBefore {\n        display: initial;\n        float: left;\n        font-weight: bold;\n        /* text-transform: uppercase; */\n    }\n    table.r-responsive-table.${className} td:last-child {\n        border-bottom: 0;\n    }\n}\n`;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport provideContext from './provideContext';\nimport withContext from './withContext';\nimport { allowed, randomString, getCssString } from './helpers';\n\nconst contextKey = '_responsiveTable';\n\nconst contextShape = PropTypes.shape({ headers: PropTypes.object });\nconst TableContext = provideContext(contextKey, contextShape);\nconst withTableContext = withContext(contextKey, contextShape);\n\nexport class Table extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            headers: {},\n            prefix: ''\n        };\n    }\n\n    componentDidMount() {\n        this.setState();\n        const prefix = randomString();\n        this.setState({ prefix }, () => {\n            const head =\n                document.head || document.getElementsByTagName('head')[0];\n            this.style = document.createElement('style');\n            this.style.type = 'text/css';\n            this.style.setAttribute('data-id', prefix);\n            this.updateStyles(this.props.breakPoint, prefix);\n            head.appendChild(this.style);\n        });\n    }\n\n    componentWillReceiveProps({ breakPoint }) {\n        if (this.props.breakPoint !== breakPoint) {\n            this.updateStyles(breakPoint, this.state.prefix);\n        }\n    }\n\n    componentWillUnmount() {\n        const head = document.head || document.getElementsByTagName('head')[0];\n        head.removeChild(this.style);\n    }\n\n    updateStyles(breakPoint, prefix) {\n        const { style } = this;\n        const css = getCssString(prefix, breakPoint);\n        if (style.styleSheet) {\n            style.styleSheet.cssText = css;\n        } else {\n            while (style.hasChildNodes()) {\n                style.removeChild(style.lastChild);\n            }\n            style.appendChild(document.createTextNode(css));\n        }\n    }\n\n    render() {\n        const { headers, prefix } = this.state;\n        const className =\n            (this.props.className ? this.props.className + ' ' : '') +\n            'r-responsive-table ' +\n            prefix;\n        return (\n            <TableContext headers={headers}>\n                <table {...allowed(this.props)} className={className} />\n            </TableContext>\n        );\n    }\n}\n\nTable.defaultProps = {\n    breakPoint: 600\n};\n\nTable.propTypes = {\n    breakPoint: PropTypes.oneOfType([PropTypes.string, PropTypes.number])\n};\n\nexport const Thead = props => (\n    <thead {...allowed(props)}>\n        {React.cloneElement(props.children, { inHeader: true })}\n    </thead>\n);\n\nclass TrInner extends React.Component {\n    constructor(props) {\n        super(props);\n        const { headers } = props._responsiveTable;\n        if (headers && props.inHeader) {\n            props.children.map((child, i) => {\n                headers[i] = child.props.children;\n            });\n        }\n    }\n    render() {\n        const { children } = this.props;\n        return (\n            <tr {...allowed(this.props)}>\n                {children &&\n                    React.Children.map(children, (child, i) =>\n                        React.cloneElement(child, {\n                            key: i,\n                            columnKey: i\n                        })\n                    )}\n            </tr>\n        );\n    }\n}\n\nexport const Tr = withTableContext(TrInner);\nexport const Th = props => <th {...allowed(props)} />;\nexport const Tbody = props => <tbody {...allowed(props)} />;\n\nclass TdInner extends React.Component {\n    render() {\n        const {\n            _responsiveTable: { headers },\n            children,\n            columnKey,\n            ...rest\n        } = this.props;\n        return (\n            <td {...rest}>\n                <div className=\"tdBefore\">{headers[columnKey]}</div>\n                {children !== undefined ? children : <div>&nbsp;</div>}\n            </td>\n        );\n    }\n}\n\nexport const Td = withTableContext(TdInner);\n"],"names":["provideContext","contextKey","contextType","ProvideContext","props","children","React","Children","only","Component","childContextTypes","WithContext","context","displayName","name","contextTypes","omit","obj","omitProps","Object","keys","filter","indexOf","key","reduce","returnObj","allowed","randomString","Math","random","toString","substring","getCssString","className","breakPoint","contextShape","PropTypes","shape","headers","object","TableContext","withTableContext","withContext","Table","state","setState","prefix","head","document","getElementsByTagName","style","createElement","type","setAttribute","updateStyles","appendChild","removeChild","css","styleSheet","cssText","hasChildNodes","lastChild","createTextNode","defaultProps","propTypes","oneOfType","string","number","Thead","cloneElement","inHeader","TrInner","_responsiveTable","map","child","i","Tr","Th","Tbody","TdInner","columnKey","rest","undefined","Td"],"mappings":"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"}